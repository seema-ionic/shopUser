{"version":3,"sources":["webpack:///src/app/RedeemModule/voucher-list-detail/voucher-list-detail.page.html","webpack:///src/app/RedeemModule/voucher-list-detail/voucher-list-detail-routing.module.ts","webpack:///src/app/RedeemModule/voucher-list-detail/voucher-list-detail.module.ts","webpack:///src/app/RedeemModule/voucher-list-detail/voucher-list-detail.page.scss","webpack:///src/app/RedeemModule/voucher-list-detail/voucher-list-detail.page.ts"],"names":["routes","path","component","VoucherListDetailPageRoutingModule","imports","forChild","exports","VoucherListDetailPageModule","declarations","VoucherListDetailPage","router","storageService","apiservices","sendData","alertController","zone","selectedAmountIndex","disableOffer","blurCheck","voucherListData","alldata","console","log","getStorage","then","res","redeemVoucherDetail","run","apiKey","dealId","apiCallWithLoginToken","subscribe","result","allData","status","VoucherDetail","data","selectedAmount","offers","actualPrice","ActualAmount","balance","amountChangeDetect","err","showToastMessage","JSON","stringify","amt","index","findIndex","e","setTimeout","ClickButton","deal_id","offer_id","dealid","offerid","salePrice","undefined","parseInt","alertfunction","selecteddealid","selectedofferid","msg","create","cssClass","message","buttons","alert","present","redeemVoucherSendOtp","navigate","selector","template"],"mappings":"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","file":"RedeemModule-voucher-list-detail-voucher-list-detail-module-es5.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title *ngIf=\\\"VoucherDetail\\\">{{allData?.data?.settings?.page_header}}</ion-title>\\n    <ion-buttons slot=\\\"start\\\"><ion-back-button></ion-back-button></ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content [ngClass]=\\\"{'hideTientScroll':blurCheck==1, 'showTientScroll':blurCheck==0}\\\">\\n\\n  <!-- <div class=\\\"perimiumUserDiv\\\" *ngIf=\\\"blurCheck==1 || blurCheck=='1'\\\"><p>{{blurMessage}}</p></div> -->\\n\\n  <div *ngIf=\\\"VoucherDetail\\\">\\n    <div [style.backgroundImage]=\\\"'url(' + VoucherDetail?.bgImage2 + ')'\\\" class=\\\"bgImage\\\"></div>\\n    <div class=\\\"moduleAligment\\\">\\n      <div class=\\\"customCard infoCard\\\">\\n        <ion-row>\\n          <ion-col [size]=\\\"6\\\"><img src=\\\"{{VoucherDetail?.merchantLogo}}\\\" class=\\\"merchantIcon\\\"></ion-col>\\n          <!-- <ion-col [size]=\\\"6\\\">\\n            <ion-button fill=\\\"clear\\\" tappable (click)=\\\"addFav(VoucherDetail)\\\" class=\\\"heartIcon\\\">\\n              <img *ngIf=\\\"VoucherDetail?.favStatus=='1'\\\" [src]=\\\"'../../../assets/icon/fillHeart.svg'\\\" class=\\\"headerIcon\\\"/> \\n              <img *ngIf=\\\"VoucherDetail?.favStatus=='0'\\\"  [src]=\\\"'../../../assets/icon/emptyHeart.svg'\\\" class=\\\"headerIcon\\\"/>         \\n            </ion-button>\\n          </ion-col> -->\\n          <ion-col [size]=\\\"12\\\"><p class=\\\"noMargin giftTitle\\\">{{VoucherDetail?.merchantName}}</p></ion-col>\\n          <ion-col *ngIf=\\\"VoucherDetail?.offers && VoucherDetail?.offers?.length>=1\\\" [size]=\\\"12\\\">\\n            <p class=\\\"denominationText\\\">Denomination:-</p>\\n          </ion-col>        \\n        </ion-row>\\n        <ion-row>\\n          <ion-col [size]=\\\"6\\\">\\n            <ion-select interface=\\\"action-sheet\\\" [(ngModel)]=\\\"selectedAmount\\\" placeholder=\\\"Select amount\\\" (ngModelChange)=\\\"amountChangeDetect(selectedAmount)\\\" style=\\\"border:1px solid var(--headerColor);padding:10px 5px;box-shadow:0px 0px 5px var(--headerColor);border-radius:5px;\\\">\\n              <ion-select-option *ngFor=\\\"let amount of VoucherDetail?.offers\\\" value=\\\"{{amount?.actualPrice}}\\\"> <span class=\\\"rupeeIcon\\\">&#8377;</span> {{amount?.actualPrice}}\\n              </ion-select-option>\\n            </ion-select>\\n          </ion-col>\\n          <ion-col [size]=\\\"6\\\">\\n            <p class=\\\"denominationVal\\\"> <span class=\\\"rupeeIcon\\\">&#8377;</span> {{VoucherDetail?.offers[selectedAmountIndex]?.actualPrice}}</p>\\n          </ion-col>\\n        </ion-row>   \\n      </div>\\n\\n      <div class=\\\"customCard tncCard\\\">\\n        <ion-row>\\n          <ion-col [size]=\\\"12\\\">\\n            <app-text-layout [text]=\\\"VoucherDetail?.offers[selectedAmountIndex]?.offerTnc\\\" [className]=\\\"'redeemVoucher'\\\"></app-text-layout>\\n          </ion-col>\\n        </ion-row>\\n      </div>\\n      <p class=\\\"noMargin\\\" *ngIf=\\\"disableOffer==true\\\"><br><br><br></p>\\n    </div>\\n  </div>\\n\\n  <div *ngIf=\\\"!VoucherDetail\\\">\\n    <app-skelton-listview  [iconPath]=\\\"'redeemVoucherDetails'\\\" [className]=\\\"'ListSkeletonClass'\\\"></app-skelton-listview>\\n  </div>\\n\\n</ion-content>\\n\\n\\n<ion-footer class=\\\"footerRedeemDiv\\\">\\n  <ion-row *ngIf=\\\"disableOffer==true\\\">\\n    <ion-col class=\\\"ion-text-center\\\">\\n      <div *ngIf=\\\"disableBtn==true\\\" class=\\\"absoDiv\\\" ></div>\\n      <!-- <app-custom-sizebutton [btnText]=\\\"RedeemNow\\\" [iconPath]=\\\"\\\" [className]=\\\"smallBtton\\\" [size]=\\\"''\\\" (click)=\\\"openModal()\\\"></app-custom-sizebutton> -->\\n      <ion-button class=\\\"dynamicSmallButton\\\" tappable (click)=\\\"redeemNowGetOtp()\\\">Redeem Now</ion-button>\\n    </ion-col>\\n  </ion-row>\\n</ion-footer>\";","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { VoucherListDetailPage } from './voucher-list-detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: VoucherListDetailPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class VoucherListDetailPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { VoucherListDetailPageRoutingModule } from './voucher-list-detail-routing.module';\nimport { VoucherListDetailPage } from './voucher-list-detail.page';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    VoucherListDetailPageRoutingModule,ComponentsModule\n  ],\n  declarations: [VoucherListDetailPage]\n})\nexport class VoucherListDetailPageModule {}\n","export default \".moduleAligment {\\n  padding-left: 10px;\\n  padding-right: 10px;\\n}\\n\\n.infoCard {\\n  margin: -60px 15px 10px 15px !important;\\n  background: #fff;\\n}\\n\\n.infoCard .giftTitle {\\n  text-align: left;\\n  font-weight: 600;\\n  color: #444;\\n  margin-bottom: 3px;\\n}\\n\\n.infoCard .merchantIcon {\\n  width: 80px;\\n  border: 1px solid #d4d4d4;\\n  padding: 5px;\\n  border-radius: 5px;\\n}\\n\\n.bgImage {\\n  height: 200px;\\n  background-size: cover;\\n  background-position: center;\\n  background-repeat: no-repeat;\\n}\\n\\n.tncCard {\\n  margin: 10px 15px 10px 15px !important;\\n}\\n\\n.heartIcon {\\n  position: absolute;\\n  top: 7px;\\n  right: 10px;\\n  z-index: 99;\\n}\\n\\n.heartIcon img {\\n  width: 35px;\\n  background: #fff;\\n  border-radius: 50%;\\n  padding: 6px;\\n}\\n\\n.denominationVal {\\n  text-align: right;\\n  font-size: 15px;\\n  font-weight: 600;\\n  color: #444;\\n}\\n\\n.denominationText {\\n  margin: 0;\\n  font-size: 12px;\\n  color: #444;\\n}\\n\\n.footerRedeemDiv {\\n  background: var(--headerColor);\\n  border-radius: 0;\\n}\\n\\n.perimiumUserDiv {\\n  position: fixed;\\n  left: 0;\\n  right: 0;\\n  background: rgba(0, 0, 0, 0.5);\\n  z-index: 999;\\n  padding: 45px 15px 0px 15px;\\n  top: 40px;\\n  bottom: 0;\\n}\\n\\n.perimiumUserDiv p {\\n  text-align: center;\\n  font-size: 20px;\\n  color: #ffffff;\\n}\\n\\n.hideTientScroll {\\n  --overflow:hidden;\\n}\\n\\n.showTientScroll {\\n  --overflow:visible;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvUmVkZWVtTW9kdWxlL3ZvdWNoZXItbGlzdC1kZXRhaWwvdm91Y2hlci1saXN0LWRldGFpbC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFBZ0Isa0JBQUE7RUFBa0IsbUJBQUE7QUFHbEM7O0FBRkE7RUFBVSx1Q0FBQTtFQUF1QyxnQkFBQTtBQU9qRDs7QUFOSTtFQUFXLGdCQUFBO0VBQWdCLGdCQUFBO0VBQWdCLFdBQUE7RUFBVyxrQkFBQTtBQVkxRDs7QUFYSTtFQUFjLFdBQUE7RUFBVyx5QkFBQTtFQUF5QixZQUFBO0VBQVksa0JBQUE7QUFpQmxFOztBQWZBO0VBQVMsYUFBQTtFQUFhLHNCQUFBO0VBQXNCLDJCQUFBO0VBQTJCLDRCQUFBO0FBc0J2RTs7QUFyQkE7RUFBUyxzQ0FBQTtBQXlCVDs7QUF4QkE7RUFBVyxrQkFBQTtFQUFrQixRQUFBO0VBQVEsV0FBQTtFQUFXLFdBQUE7QUErQmhEOztBQTlCSTtFQUFJLFdBQUE7RUFBVyxnQkFBQTtFQUFnQixrQkFBQTtFQUFrQixZQUFBO0FBb0NyRDs7QUFsQ0E7RUFBaUIsaUJBQUE7RUFBaUIsZUFBQTtFQUFlLGdCQUFBO0VBQWdCLFdBQUE7QUF5Q2pFOztBQXhDQTtFQUFrQixTQUFBO0VBQVMsZUFBQTtFQUFlLFdBQUE7QUE4QzFDOztBQTdDQTtFQUFpQiw4QkFBQTtFQUE4QixnQkFBQTtBQWtEL0M7O0FBN0NBO0VBQWlCLGVBQUE7RUFBZSxPQUFBO0VBQU8sUUFBQTtFQUFRLDhCQUFBO0VBQzNDLFlBQUE7RUFBWSwyQkFBQTtFQUEyQixTQUFBO0VBQVMsU0FBQTtBQXVEcEQ7O0FBdERJO0VBQUUsa0JBQUE7RUFBa0IsZUFBQTtFQUFlLGNBQUE7QUEyRHZDOztBQXpEQTtFQUFpQixpQkFBQTtBQTZEakI7O0FBNURBO0VBQWlCLGtCQUFBO0FBZ0VqQiIsImZpbGUiOiJzcmMvYXBwL1JlZGVlbU1vZHVsZS92b3VjaGVyLWxpc3QtZGV0YWlsL3ZvdWNoZXItbGlzdC1kZXRhaWwucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1vZHVsZUFsaWdtZW50e3BhZGRpbmctbGVmdDoxMHB4O3BhZGRpbmctcmlnaHQ6MTBweDt9XG4uaW5mb0NhcmR7bWFyZ2luOi02MHB4IDE1cHggMTBweCAxNXB4ICFpbXBvcnRhbnQ7YmFja2dyb3VuZDojZmZmO1xuICAgIC5naWZ0VGl0bGV7dGV4dC1hbGlnbjpsZWZ0O2ZvbnQtd2VpZ2h0OjYwMDtjb2xvcjojNDQ0O21hcmdpbi1ib3R0b206M3B4O31cbiAgICAubWVyY2hhbnRJY29ue3dpZHRoOjgwcHg7Ym9yZGVyOjFweCBzb2xpZCAjZDRkNGQ0O3BhZGRpbmc6NXB4O2JvcmRlci1yYWRpdXM6NXB4O31cbn1cbi5iZ0ltYWdle2hlaWdodDoyMDBweDtiYWNrZ3JvdW5kLXNpemU6Y292ZXI7YmFja2dyb3VuZC1wb3NpdGlvbjpjZW50ZXI7YmFja2dyb3VuZC1yZXBlYXQ6bm8tcmVwZWF0O31cbi50bmNDYXJke21hcmdpbjoxMHB4IDE1cHggMTBweCAxNXB4ICFpbXBvcnRhbnR9XG4uaGVhcnRJY29ue3Bvc2l0aW9uOmFic29sdXRlO3RvcDo3cHg7cmlnaHQ6MTBweDt6LWluZGV4Ojk5O1xuICAgIGltZ3t3aWR0aDozNXB4O2JhY2tncm91bmQ6I2ZmZjtib3JkZXItcmFkaXVzOjUwJTtwYWRkaW5nOjZweDt9XG59XG4uZGVub21pbmF0aW9uVmFse3RleHQtYWxpZ246cmlnaHQ7Zm9udC1zaXplOjE1cHg7Zm9udC13ZWlnaHQ6NjAwO2NvbG9yOiM0NDQ7fVxuLmRlbm9taW5hdGlvblRleHR7bWFyZ2luOjA7Zm9udC1zaXplOjEycHg7Y29sb3I6IzQ0NDt9XG4uZm9vdGVyUmVkZWVtRGl2e2JhY2tncm91bmQ6dmFyKC0taGVhZGVyQ29sb3IpO2JvcmRlci1yYWRpdXM6MDt9XG5cblxuXG5cbi5wZXJpbWl1bVVzZXJEaXZ7cG9zaXRpb246Zml4ZWQ7bGVmdDowO3JpZ2h0OjA7YmFja2dyb3VuZDpyZ2JhKDAsIDAsIDAsIDAuNSk7XG4gICAgei1pbmRleDo5OTk7cGFkZGluZzo0NXB4IDE1cHggMHB4IDE1cHg7dG9wOjQwcHg7Ym90dG9tOjA7XG4gICAgcHt0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MjBweDtjb2xvcjojZmZmZmZmO31cbn1cbi5oaWRlVGllbnRTY3JvbGx7LS1vdmVyZmxvdzpoaWRkZW47fVxuLnNob3dUaWVudFNjcm9sbHstLW92ZXJmbG93OnZpc2libGU7fSJdfQ== */\";","import { Component, NgZone, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { ApiservicesService } from '../../provider/apiservices.service';\nimport { DataTransferService } from '../../services/data-transfer.service';\nimport { LocalStorageService } from '../../services/local-storage.service';\nimport { URLS, APP_CONFIG } from '../../../../src/assets/constant';\nimport { AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-voucher-list-detail',\n  templateUrl: './voucher-list-detail.page.html',\n  styleUrls: ['./voucher-list-detail.page.scss'],\n})\n\nexport class VoucherListDetailPage implements OnInit{\n\n  VoucherDetail:any;\n  selectedAmountIndex:number = 0;\n  ActualAmount:any;\n  disableOffer:boolean= false;\n  selecteddealid:any;\n  selectedofferid:any;\n  salePrice:any;\n  allData:any;\n  selectedAmount:any;\n  blurCheck:number=0;\n  blurMessage:any;\n  voucherListData:any;\n\n  constructor(private router:Router,private storageService:LocalStorageService,private apiservices:ApiservicesService,\n    private sendData:DataTransferService,public alertController:AlertController,private zone:NgZone) {\n\n    this.voucherListData=this.sendData.alldata;\n    console.log(\"voucher list data==\", this.voucherListData);\n\n  }\n\n\n\n\n\n\n\n\n\n  ngOnInit(){\n    this.storageService.getStorage().then(res=>{\n      this.redeemVoucherDetail();\n      console.log(\"ionic lifecycle called getStorage==>\",res);\n    });\n  }\n\n  redeemVoucherDetail(){\n    this.zone.run(()=>{\n      let apiKey={\n        \"dealId\": this.voucherListData.dealId\n      };\n      this.apiservices.apiCallWithLoginToken(URLS.redeemVoucherDetail, apiKey).subscribe((result) => {\n        console.log('response== ', result);\n        this.allData=result;\n        if(result.status==1 || result.status=='1'){\n          this.VoucherDetail=this.allData.data;\n          this.selectedAmount =this.VoucherDetail.offers[this.selectedAmountIndex].actualPrice;\n          this.ActualAmount = this.VoucherDetail.balance;\n          this.amountChangeDetect(this.selectedAmount);\n        }else{\n        }\n      }, err=>{\n        this.apiservices.showToastMessage(JSON.stringify(err), 'top', 3000, 'redBg');\n      });\n    });\n  }\n\n  amountChangeDetect(amt){\n    this.zone.run(()=>{\n      console.log(\"select amount== \", amt);\n      var index = this.VoucherDetail.offers.findIndex(function (e) {\n        console.log(\"function data==\", e);\n        return e.actualPrice == amt;\n      });\n      console.log(\"function active index==\",index);\n      this.selectedAmountIndex = index;\n      setTimeout(() => {\n        this.VoucherDetail.offers[this.selectedAmountIndex];\n        this.ClickButton(\n          this.VoucherDetail.offers[this.selectedAmountIndex].deal_id,\n          this.VoucherDetail.offers[this.selectedAmountIndex].offer_id,\n          this.VoucherDetail.offers[this.selectedAmountIndex].actualPrice\n        );\n      }, 100);\n    });\n  }\n\n  ClickButton(dealid, offerid, salePrice){\n    this.zone.run(()=>{\n      console.log(dealid, offerid, salePrice, this.ActualAmount);\n      if (this.ActualAmount == null || this.ActualAmount == undefined || this.ActualAmount == \"\" || \n        this.ActualAmount == \"null\" || this.ActualAmount == \"undefined\") {\n        this.ActualAmount = 0;\n      }\n      if (parseInt(salePrice) > parseInt(this.ActualAmount) || parseInt(salePrice) == null || parseInt(salePrice) == undefined) {\n        console.log(\"111\", this.disableOffer);\n        this.disableOffer = false;\n        this.alertfunction(\"Insufficient Balance\");\n      } else {\n        this.disableOffer = true;\n      }\n      this.selecteddealid = dealid;\n      this.selectedofferid = offerid;\n      this.salePrice = salePrice;\n    });\n  }\n\n  async alertfunction(msg){\n    const alert = await this.alertController.create({\n      cssClass: \"my-custom-class\",\n      // header: 'Alert',\n      // subHeader: 'Subtitle',\n      message: msg,\n      buttons: [\"OK\"],\n    });\n    await alert.present();\n  }\n\n  redeemNowGetOtp(){\n    this.zone.run(()=>{\n      let apiKey={\n        \"dealId\": this.VoucherDetail.offers[this.selectedAmountIndex].deal_id,\n        \"offerId\": this.VoucherDetail.offers[this.selectedAmountIndex].offer_id,\n        \"quantity\": \"1\",\n        \"redeemstatus\": \"1\"\n      };\n      console.log(\"Redeem Voucher and Get OTP, api key\", apiKey);\n      this.apiservices.apiCallWithLoginToken(URLS.redeemVoucherSendOtp, apiKey).subscribe((result) => {\n        console.log(\"Redeem Voucher and Get OTP, api response==\",result);\n        if(result.status==1 || result.status=='1'){\n          this.apiservices.showToastMessage(result.message, 'top', 3000, 'greenBg');\n          this.sendData.alldata=result;\n          this.router.navigate([\"/redeem-otp\"]);\n        }else{\n          this.apiservices.showToastMessage(result.message, 'top', 3000, 'redBg');\n        }\n      }, err =>{\n        this.apiservices.showToastMessage(JSON.stringify(err),'top',3000,'redBg');\n      });\n    });\n  }\n\n\n\n\n\n\n\n\n  \n}"]}